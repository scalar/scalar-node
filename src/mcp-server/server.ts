/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { ScalarCore } from "../core.js";
import { SDKOptions } from "../lib/config.js";
import type { ConsoleLogger } from "./console-logger.js";
import { createRegisterPrompt } from "./prompts.js";
import {
  createRegisterResource,
  createRegisterResourceTemplate,
} from "./resources.js";
import { MCPScope } from "./scopes.js";
import { createRegisterTool } from "./tools.js";
import { tool$apiDocsDeletev1ApisNamespaceSlug } from "./tools/apiDocsDeletev1ApisNamespaceSlug.js";
import { tool$apiDocsDeletev1ApisNamespaceSlugAccessGroup } from "./tools/apiDocsDeletev1ApisNamespaceSlugAccessGroup.js";
import { tool$apiDocsDeletev1ApisNamespaceSlugVersionSemver } from "./tools/apiDocsDeletev1ApisNamespaceSlugVersionSemver.js";
import { tool$apiDocsGetv1ApisNamespace } from "./tools/apiDocsGetv1ApisNamespace.js";
import { tool$apiDocsGetv1ApisNamespaceSlugVersionSemver } from "./tools/apiDocsGetv1ApisNamespaceSlugVersionSemver.js";
import { tool$apiDocsPatchv1ApisNamespaceSlug } from "./tools/apiDocsPatchv1ApisNamespaceSlug.js";
import { tool$apiDocsPostv1ApisNamespace } from "./tools/apiDocsPostv1ApisNamespace.js";
import { tool$apiDocsPostv1ApisNamespaceSlugAccessGroup } from "./tools/apiDocsPostv1ApisNamespaceSlugAccessGroup.js";
import { tool$apiDocsPostv1ApisNamespaceSlugVersion } from "./tools/apiDocsPostv1ApisNamespaceSlugVersion.js";
import { tool$guidesGetv1Guides } from "./tools/guidesGetv1Guides.js";
import { tool$guidesPostv1Guides } from "./tools/guidesPostv1Guides.js";
import { tool$guidesPostv1GuidesSlugPublish } from "./tools/guidesPostv1GuidesSlugPublish.js";
import { tool$loginPortalsDeletev1LoginPortalsSlug } from "./tools/loginPortalsDeletev1LoginPortalsSlug.js";
import { tool$loginPortalsGetv1LoginPortals } from "./tools/loginPortalsGetv1LoginPortals.js";
import { tool$loginPortalsGetv1LoginPortalsSlug } from "./tools/loginPortalsGetv1LoginPortalsSlug.js";
import { tool$loginPortalsPatchv1LoginPortalsSlug } from "./tools/loginPortalsPatchv1LoginPortalsSlug.js";
import { tool$loginPortalsPostv1LoginPortals } from "./tools/loginPortalsPostv1LoginPortals.js";
import { tool$rulesDeletev1RulesetsNamespaceSlug } from "./tools/rulesDeletev1RulesetsNamespaceSlug.js";
import { tool$rulesDeletev1RulesetsNamespaceSlugAccessGroup } from "./tools/rulesDeletev1RulesetsNamespaceSlugAccessGroup.js";
import { tool$rulesGetv1RulesetsNamespace } from "./tools/rulesGetv1RulesetsNamespace.js";
import { tool$rulesGetv1RulesetsNamespaceSlug } from "./tools/rulesGetv1RulesetsNamespaceSlug.js";
import { tool$rulesPatchv1RulesetsNamespaceSlug } from "./tools/rulesPatchv1RulesetsNamespaceSlug.js";
import { tool$rulesPostv1RulesetsNamespace } from "./tools/rulesPostv1RulesetsNamespace.js";
import { tool$rulesPostv1RulesetsNamespaceSlugAccessGroup } from "./tools/rulesPostv1RulesetsNamespaceSlugAccessGroup.js";
import { tool$schemasDeletev1SchemasNamespaceSlug } from "./tools/schemasDeletev1SchemasNamespaceSlug.js";
import { tool$schemasDeletev1SchemasNamespaceSlugAccessGroup } from "./tools/schemasDeletev1SchemasNamespaceSlugAccessGroup.js";
import { tool$schemasDeletev1SchemasNamespaceSlugVersionSemver } from "./tools/schemasDeletev1SchemasNamespaceSlugVersionSemver.js";
import { tool$schemasGetv1SchemasNamespace } from "./tools/schemasGetv1SchemasNamespace.js";
import { tool$schemasGetv1SchemasNamespaceSlugVersionSemver } from "./tools/schemasGetv1SchemasNamespaceSlugVersionSemver.js";
import { tool$schemasPatchv1SchemasNamespaceSlug } from "./tools/schemasPatchv1SchemasNamespaceSlug.js";
import { tool$schemasPostv1SchemasNamespace } from "./tools/schemasPostv1SchemasNamespace.js";
import { tool$schemasPostv1SchemasNamespaceSlugAccessGroup } from "./tools/schemasPostv1SchemasNamespaceSlugAccessGroup.js";
import { tool$schemasPostv1SchemasNamespaceSlugVersion } from "./tools/schemasPostv1SchemasNamespaceSlugVersion.js";
import { tool$themesDeletev1ThemesSlug } from "./tools/themesDeletev1ThemesSlug.js";
import { tool$themesGetv1Themes } from "./tools/themesGetv1Themes.js";
import { tool$themesGetv1ThemesSlug } from "./tools/themesGetv1ThemesSlug.js";
import { tool$themesPatchv1ThemesSlug } from "./tools/themesPatchv1ThemesSlug.js";
import { tool$themesPostv1Themes } from "./tools/themesPostv1Themes.js";
import { tool$themesPutv1ThemesSlug } from "./tools/themesPutv1ThemesSlug.js";

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  serverURL?: string | undefined;
  bearerAuth?: SDKOptions["bearerAuth"] | undefined;
  serverIdx?: SDKOptions["serverIdx"] | undefined;
}) {
  const server = new McpServer({
    name: "Scalar",
    version: "0.0.4",
  });

  const client = new ScalarCore({
    bearerAuth: deps.bearerAuth,
    serverURL: deps.serverURL,
    serverIdx: deps.serverIdx,
  });

  const scopes = new Set(deps.scopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(
    deps.logger,
    server,
    client,
    scopes,
    allowedTools,
  );
  const resource = createRegisterResource(deps.logger, server, client, scopes);
  const resourceTemplate = createRegisterResourceTemplate(
    deps.logger,
    server,
    client,
    scopes,
  );
  const prompt = createRegisterPrompt(deps.logger, server, client, scopes);
  const register = { tool, resource, resourceTemplate, prompt };
  void register; // suppress unused warnings

  tool(tool$apiDocsGetv1ApisNamespace);
  tool(tool$apiDocsPostv1ApisNamespace);
  tool(tool$apiDocsPatchv1ApisNamespaceSlug);
  tool(tool$apiDocsDeletev1ApisNamespaceSlug);
  tool(tool$apiDocsGetv1ApisNamespaceSlugVersionSemver);
  tool(tool$apiDocsDeletev1ApisNamespaceSlugVersionSemver);
  tool(tool$apiDocsPostv1ApisNamespaceSlugVersion);
  tool(tool$apiDocsPostv1ApisNamespaceSlugAccessGroup);
  tool(tool$apiDocsDeletev1ApisNamespaceSlugAccessGroup);
  tool(tool$schemasGetv1SchemasNamespace);
  tool(tool$schemasPostv1SchemasNamespace);
  tool(tool$schemasPatchv1SchemasNamespaceSlug);
  tool(tool$schemasDeletev1SchemasNamespaceSlug);
  tool(tool$schemasGetv1SchemasNamespaceSlugVersionSemver);
  tool(tool$schemasDeletev1SchemasNamespaceSlugVersionSemver);
  tool(tool$schemasPostv1SchemasNamespaceSlugVersion);
  tool(tool$schemasPostv1SchemasNamespaceSlugAccessGroup);
  tool(tool$schemasDeletev1SchemasNamespaceSlugAccessGroup);
  tool(tool$loginPortalsGetv1LoginPortalsSlug);
  tool(tool$loginPortalsPatchv1LoginPortalsSlug);
  tool(tool$loginPortalsDeletev1LoginPortalsSlug);
  tool(tool$loginPortalsPostv1LoginPortals);
  tool(tool$loginPortalsGetv1LoginPortals);
  tool(tool$rulesGetv1RulesetsNamespace);
  tool(tool$rulesPostv1RulesetsNamespace);
  tool(tool$rulesPatchv1RulesetsNamespaceSlug);
  tool(tool$rulesDeletev1RulesetsNamespaceSlug);
  tool(tool$rulesGetv1RulesetsNamespaceSlug);
  tool(tool$rulesPostv1RulesetsNamespaceSlugAccessGroup);
  tool(tool$rulesDeletev1RulesetsNamespaceSlugAccessGroup);
  tool(tool$themesGetv1Themes);
  tool(tool$themesPostv1Themes);
  tool(tool$themesPatchv1ThemesSlug);
  tool(tool$themesPutv1ThemesSlug);
  tool(tool$themesDeletev1ThemesSlug);
  tool(tool$themesGetv1ThemesSlug);
  tool(tool$guidesGetv1Guides);
  tool(tool$guidesPostv1Guides);
  tool(tool$guidesPostv1GuidesSlugPublish);

  return server;
}
